{% extends 'base.html' %}
{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@latest/swiper-bundle.min.css">
<script src="https://cdn.jsdelivr.net/npm/swiper@latest/swiper-bundle.min.js"></script>

<style>
    .swiper-container {
        width: 100%;
        overflow: hidden;
        cursor: pointer;
    }

    @media screen and (max-width:500px) {
        .iii {
            width: 100%;
        }
    }
</style>

<div
    class="w-full h-full flex flex-col md:flex-row lg:flex-row flex-nowrap justify-between items-center md:justify-start md:items-start lg:justify-start lg:items-start box-border">
    {% include 'left_menu.html' %}
    <div
        class="w-full h-full  flex flex-col justify-between items-start overflow-auto bg-[#F4F4F4] gap-5 box-border order-1 md:order-2 lg:order-2 xl:order-2 2xl-order-2 relative">
        <div
            class=" w-full h-full flex flex-col justify-start items-start p-3 md:p-10 lg:p-20 box-border overflow-y-scroll scrollbar-none gap-10">
            <div class="w-full h-max flex flex-col justify-start items-start gap-5 scrollbar-none box-border">
                <h1 class="w-max h-max text-base md:text-lg lg:text-xl font-semibold">Yangi kurslar</h1>
                <div class="swiper-container">
                    <div class="swiper-wrapper">
                        {% for course in courses %}
                        <a href="{% url 'course-part-detail' course.parts.all.0.id %}">
                            <div class="swiper-slide w-full min-w-[344px] md:w-[344px] lg:w-[344px] h-[320px] rounded-xl bg-white flex flex-col justify-start items-center p-5 gap-2 box-border">
                                <img alt="course Image" loading="eager" width="320" height="200" decoding="async"
                                    data-nimg="1" class="w-[320px] h-48 object-cover rounded-lg iii"
                                    src="{{ course.thumb.url }}"
                                    style="color: transparent;">
                                <section class="w-full flex flex-col justify-start items-start flex-wrap">
                                    <h1 class="text-base md:text-lg lg:text-xl font-semibold">{{ course.title }}</h1>
                                    <p class="text-base font-normal text-blue">{{ course.muallif }}</p>
                                </section>
                                <p class="w-full text-left text-sm lg:text-base text-gray-400">{{ course.time }}</p>
                                <p class="text-white py-2 px-3 text-center w-full rounded-lg flex justify-center items-center gap-2 mt-4 bg-green"
                                >Davom ettirish</p>
                            </div>
                        </a>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="w-full h-max flex flex-col justify-start items-start gap-5 scrollbar-none box-border">
                <h1 class="w-max h-max text-base md:text-lg lg:text-xl font-semibold">Tavsiya etiladigan kurslar</h1>
                {% for course in recomended %}
                    <div
                        class="w-full max-w-[1296px] h-max flex flex-col md:flex-row lg:flex-row justify-center items-center md:justify-start lg:justify-start gap-6 p-5 bg-white rounded-xl box-border overflow-hidden break-words">
                        <img alt="course Image" loading="eager" width="320" height="180" decoding="async" data-nimg="1"
                            class="w-[320px] md:w-1/3 lg:w-[320px] h-44 object-cover rounded-lg"
                            src="{{ course.thumb.url }}"
                            style="color: transparent;">
                        <section
                            class="w-full md:w-max lg:w-max h-max flex flex-col justify-start md:justify-center lg:justify-center items-start flex-wrap gap-2">
                            <h1 class="text-base md:text-lg lg:text-xl font-semibold">{{ course.title }}</h1>
                            <p class="text-base font-normal text-blue">{{ course.muallif }}</p>
                            <p class="text-left text-sm lg:text-base text-gray-400">{{ course.time }}</p>
                        </section>
                        <section
                            class="ml-auto w-full md:w-max lg:w-max h-max flex flex-col justify-center items-center gap-2">
                            <span class="w-max gap-2 flex flex-row"><svg xmlns="http://www.w3.org/2000/svg" fill="none"
                                    viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" aria-hidden="true"
                                    width="20">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z">
                                    </path>
                                </svg>{{ course.related_users.count }}</span><a
                                class="text-white py-2 px-3 text-center w-full rounded-lg flex justify-center items-center gap-2  bg-green"
                                href="{% url 'course-part-detail' course.parts.all.0.id %}">Davom ettirish</a></section>
                    </div>
                {% endfor %}
            </div>
            <div class="w-full h-max flex flex-col justify-start items-start gap-5 scrollbar-none box-border">
                <h1 class="w-max h-max text-base md:text-lg lg:text-xl font-semibold">Barcha kurslar</h1>
                <div
                    class="w-full h-max flex flex-row flex-wrap justify-start items-start gap-5 scrollbar-none box-border">
                    {% for course in page %}
                        <div
                            class="w-full md:w-[344px] lg:w-[344px] h-[320px] rounded-xl bg-white flex flex-col justify-start items-center p-5 gap-2 box-border">
                            <img alt="course Image" loading="eager" width="320" height="200" decoding="async" data-nimg="1"
                                class="w-[320px] h-48 object-cover rounded-lg"
                                src="{{ course.thumb.url }}"
                                style="color: transparent;">
                            <section class="w-full flex flex-col justify-start items-start flex-wrap">
                                <h1 class="text-base md:text-lg lg:text-xl font-semibold">{{ course.title }}</h1>
                                <p class="text-base font-normal text-blue">{{course.muallif}}</p>
                            </section>
                            <p class="w-full text-left text-sm lg:text-base text-gray-400">{{ course.time }}</p><a
                                class="text-white py-2 px-3 text-center w-full rounded-lg flex justify-center items-center gap-2 mt-4 bg-green"
                                href="{% url 'course-part-detail' course.parts.all.0.id %}">Davom ettirish</a>
                        </div>
                    {% endfor %}
                </div>
                <div class="w-full flex justify-center items-center box-border">
                    <div
                        class=" box-border flex flex-row justify-start items-center rounded-lg  h-max  w-max overflow-x-scroll  scrollbar-none scroll-smooth">
                        <ul class="box-border flex max-w-[1200px] w-max items-center justify-between font-body py-2 scrollbar-none gap-x-2 !list-none" role="navigation" aria-label="Pagination">
                            <li class="h-10 w-10">
                                <a {% if page.has_previous %} href="{% url 'courses' %}?page={{ page.previous_page_number }}"{% endif %} class="h-full w-full  flex items-center justify-center " tabindex="-1" role="button" aria-label="Previous page" rel="prev">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" width="20" color="rgb(147 51 234 / var(--tw-border-opacity))">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5"></path>
                                    </svg>
                                </a>
                            </li>
                            {% for pnum in page_range %}
                                <li class="h-10 w-10 text-black rounded-md h-10 w-12 {% if pnum == pagenum %}bg-white{% endif %}">
                                    <a href="{% url 'courses' %}?page={{pnum}}" rel="canonical" role="button" class="h-full w-full  flex items-center justify-center" tabindex="-1" aria-label="Page 1 is your current page" aria-current="page">{{ pnum }}</a>
                                </li>
                            {% endfor %}
                            <li class="h-10 w-10">
                                <a {% if page.has_next %} href="{% url 'courses' %}?page={{ page.next_page_number }}"{% endif %} class="h-full w-full  flex items-center justify-center" tabindex="0" role="button" aria-disabled="false" aria-label="Next page" rel="next">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" width="20" color="rgb(147 51 234 / var(--tw-border-opacity))">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path>
                                    </svg>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <section class="w-full hidden md:flex lg:flex justify-center items-center">
            {% include 'footer.html' %}
        </section>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const swiper = new Swiper('.swiper-container', {
        loop: true, // Cheksiz aylanish
        autoplay: {
            delay: 5000, // 5 soniya
            disableOnInteraction: false, // Foydalanuvchi o'zaro aloqada bo'lsa ham avtomatik aylanishni davom ettirish
        },
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
        slidesPerView: 3, // Standart holat uchun slaydlar soni
        spaceBetween: 30,
        breakpoints: {
            // Kichik ekranlar uchun 1 ta slayd
            0: {
                slidesPerView: 1,
                spaceBetween: 20,
            },
            // O'rta ekranlar uchun 2 ta slayd
            768: {
                slidesPerView: 2,
                spaceBetween: 20,
            },
            // Katta ekranlar uchun 3 ta slayd (standart holat)
            1024: {
                slidesPerView: 3,
                spaceBetween: 30,
            },

            1440: {
                slidesPerView:4,
                spaceBetween: 30, 
            }
        },
    });
});


</script>

{% endblock content %}